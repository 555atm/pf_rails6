

# dockerインストール手順

sudo su

#dockerのインストール

yum install -y docker

#ec2-userをdockerグループに入れる。これでec2-userがdockerコマンドを実行できる

usermod -a -G docker ec2-user

#dockerの起動

systemctl start docker

#dockerの起動確認

docker info

mkdir -p /usr/local/lib/docker/cli-plugins

#docker-composeの最新バージョンは以下のサイトから確認できますので、コマンドの2.4.1のところを適宜書き換えて実行してくださいhttps://matsuand.github.io/docs.docker.jp.onthefly/compose/install/

curl -SL https://github.com/docker/compose/releases/download/v2.4.1/docker-compose-linux-x86_64 -o /usr/local/lib/docker/cli-plugins/docker-compose

ls -al /usr/local/lib/docker/cli-plugins/docker-compose

chmod +x /usr/local/lib/docker/cli-plugins/docker-compose
ls -al /usr/local/lib/docker/cli-plugins/docker-compose

#docker-composeのパスを通す（docker-composeコマンドを環境変数に追加）

vi ~/.bashrc

|

export PATH="/usr/local/lib/docker/cli-plugins:$PATH"
:wq!

source ~/.bashrc

docker-compose version

【Bパターン】

###あるいは以下でも良い（ずっと./をつけないしパスも限定されちゃうけど。。）

#docker各種ファイル（Dockerfileとか）がある場所でdocker-composeを実行する

cd [docker各種ファイルがあるディレクトリ]

ln -s /usr/local/lib/docker/cli-plugins/docker-compose ./docker-compose

./docker compose version

# 用意するファイル

- Dockerfile
- docker-compose.yml
- Gemfile
- Gemfile.lock (空で良い)


# gitインストール手順

sudo su
yum install git
git config --global user.name "username"
git config --global user.email "your_email@xxxx.xx"
git clone https://xxxxx.git

cd your_app


# rails 動かす

# 各種dockerファイルがあるパスにて以下コマンドを実施
docker-compose run web rails new . --force --database=mysql --skip-bundle





